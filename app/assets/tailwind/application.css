@import 'tailwindcss';

@theme {
  /* Custom spacing for page tree indentation */
  --spacing-18: 4.5rem;

  /* Legacy colors - DEPRECATED: Use primary-* scale instead */
  /* Fallback values ensure UI is visible even without data-theme attribute */
  --color-white: #f9f9f9;
  --color-black: #1a161d;
  --color-light: #f1f9fa;
  --color-mid: #3c879e;
  --color-dark: #182934;
  --color-highlight: #d04014;
  --color-active: #16a34a;
  --color-inactive: #dbeafe;
  --color-warning: #f59e0b;
  --color-error: #dc2626;

  /* Primary color scale (Glacier/Teal) - with fallback values */
  --color-primary-50: #f1f9fa;
  --color-primary-100: #dbeef2;
  --color-primary-200: #bcdde5;
  --color-primary-300: #83bfcf;
  --color-primary-400: #57a3b9;
  --color-primary-500: #3c879e;
  --color-primary-600: #346e86;
  --color-primary-700: #305b6e;
  --color-primary-800: #2e4d5c;
  --color-primary-900: #2a424f;
  --color-primary-950: #182934;

  /* Semantic colors - Success (Green) */
  --color-success-50: #f0fdf4;
  --color-success-100: #dcfce7;
  --color-success-500: #22c55e;
  --color-success-600: #16a34a;
  --color-success-700: #15803d;

  /* Semantic colors - Error (Red) */
  --color-error-50: #fef2f2;
  --color-error-100: #fee2e2;
  --color-error-500: #ef4444;
  --color-error-600: #dc2626;
  --color-error-700: #b91c1c;

  /* Semantic colors - Warning (Amber) */
  --color-warning-50: #fffbeb;
  --color-warning-100: #fef3c7;
  --color-warning-500: #f59e0b;
  --color-warning-600: #d97706;
  --color-warning-700: #b45309;

  /* Semantic colors - Info (Blue) */
  --color-info-50: #eff6ff;
  --color-info-100: #dbeafe;
  --color-info-500: #3b82f6;
  --color-info-600: #2563eb;
  --color-info-700: #1d4ed8;

  /* Map indigo to primary for Tailwind UI compatibility */
  --color-indigo-50: var(--color-primary-50);
  --color-indigo-100: var(--color-primary-100);
  --color-indigo-200: var(--color-primary-200);
  --color-indigo-300: var(--color-primary-300);
  --color-indigo-400: var(--color-primary-400);
  --color-indigo-500: var(--color-primary-500);
  --color-indigo-600: var(--color-primary-600);
  --color-indigo-700: var(--color-primary-700);
  --color-indigo-800: var(--color-primary-800);
  --color-indigo-900: var(--color-primary-900);
  --color-indigo-950: var(--color-primary-950);

  /* Gray scale - with fallback values */
  --color-gray-50: #f9fafb;
  --color-gray-100: #f3f4f6;
  --color-gray-200: #e5e7eb;
  --color-gray-300: #d1d5db;
  --color-gray-400: #9ca3af;
  --color-gray-500: #6b7280;
  --color-gray-600: #4b5563;
  --color-gray-700: #374151;
  --color-gray-800: #1f2937;
  --color-gray-900: #111827;
  --color-gray-950: #030712;
}

@layer base {
  html[data-theme='default'] {
    --color-white: rgb(249, 249, 249); /* #F9F9F9 */
    --color-black: rgb(26, 22, 29); /* #1A161D */

    /* Legacy color variables - DEPRECATED: Map to primary scale */
    --color-light: rgb(241, 249, 250); /* Maps to primary-50 */
    --color-mid: rgb(60, 135, 158); /* Maps to primary-500 */
    --color-dark: rgb(24, 41, 52); /* Maps to primary-950 */

    --color-highlight: rgb(208, 64, 20); /* #D04014 */

    --color-active: rgb(22, 163, 74); /* green-600 - success */
    --color-warning: rgb(245, 158, 11); /* amber-500 */
    --color-inactive: rgb(219, 234, 254); /* blue-100 */
    --color-error: rgb(220, 38, 38); /* red-600 */

    /* Primary color scale - Glacier (Teal) */
    --color-primary-50: rgb(241, 249, 250); /* #f1f9fa */
    --color-primary-100: rgb(219, 238, 242); /* #dbeef2 */
    --color-primary-200: rgb(188, 221, 229); /* #bcdde5 */
    --color-primary-300: rgb(131, 191, 207); /* #83bfcf */
    --color-primary-400: rgb(87, 163, 185); /* #57a3b9 */
    --color-primary-500: rgb(60, 135, 158); /* #3c879e */
    --color-primary-600: rgb(52, 110, 134); /* #346e86 */
    --color-primary-700: rgb(48, 91, 110); /* #305b6e */
    --color-primary-800: rgb(46, 77, 92); /* #2e4d5c */
    --color-primary-900: rgb(42, 66, 79); /* #2a424f */
    --color-primary-950: rgb(24, 41, 52); /* #182934 */

    /* Semantic colors - Success (Green) */
    --color-success-50: rgb(240, 253, 244); /* green-50 */
    --color-success-100: rgb(220, 252, 231); /* green-100 */
    --color-success-500: rgb(34, 197, 94); /* green-500 */
    --color-success-600: rgb(22, 163, 74); /* green-600 */
    --color-success-700: rgb(21, 128, 61); /* green-700 */

    /* Semantic colors - Error (Red) */
    --color-error-50: rgb(254, 242, 242); /* red-50 */
    --color-error-100: rgb(254, 226, 226); /* red-100 */
    --color-error-500: rgb(239, 68, 68); /* red-500 */
    --color-error-600: rgb(220, 38, 38); /* red-600 */
    --color-error-700: rgb(185, 28, 28); /* red-700 */

    /* Semantic colors - Warning (Amber) */
    --color-warning-50: rgb(255, 251, 235); /* amber-50 */
    --color-warning-100: rgb(254, 243, 199); /* amber-100 */
    --color-warning-500: rgb(245, 158, 11); /* amber-500 */
    --color-warning-600: rgb(217, 119, 6); /* amber-600 */
    --color-warning-700: rgb(180, 83, 9); /* amber-700 */

    /* Semantic colors - Info (Blue) */
    --color-info-50: rgb(239, 246, 255); /* blue-50 */
    --color-info-100: rgb(219, 234, 254); /* blue-100 */
    --color-info-500: rgb(59, 130, 246); /* blue-500 */
    --color-info-600: rgb(37, 99, 235); /* blue-600 */
    --color-info-700: rgb(29, 78, 216); /* blue-700 */

    /* Gray scale for UI elements */
    --color-gray-50: rgb(249, 250, 251);
    --color-gray-100: rgb(243, 244, 246);
    --color-gray-200: rgb(229, 231, 235);
    --color-gray-300: rgb(209, 213, 219);
    --color-gray-400: rgb(156, 163, 175);
    --color-gray-500: rgb(107, 114, 128);
    --color-gray-600: rgb(75, 85, 99);
    --color-gray-700: rgb(55, 65, 81);
    --color-gray-800: rgb(31, 41, 55);
    --color-gray-900: rgb(17, 24, 39);
    --color-gray-950: rgb(3, 7, 18);
  }

  html[data-theme='ocean'] {
    --color-white: rgb(249, 249, 249); /* #F9F9F9 */
    --color-black: rgb(26, 22, 29); /* #1A161D */

    /* Legacy color variables - DEPRECATED: Map to primary scale */
    --color-light: rgb(239, 246, 255); /* Maps to primary-50 (blue-50) */
    --color-mid: rgb(59, 130, 246); /* Maps to primary-500 (blue-500) */
    --color-dark: rgb(30, 58, 138); /* Maps to primary-950 (blue-950) */

    --color-highlight: rgb(208, 64, 20); /* #D04014 */

    --color-active: rgb(22, 163, 74); /* green-600 - success */
    --color-warning: rgb(245, 158, 11); /* amber-500 */
    --color-inactive: rgb(219, 234, 254); /* blue-100 */
    --color-error: rgb(220, 38, 38); /* red-600 */

    /* Primary color scale - Ocean (Blue) */
    --color-primary-50: rgb(239, 246, 255); /* blue-50 */
    --color-primary-100: rgb(219, 234, 254); /* blue-100 */
    --color-primary-200: rgb(191, 219, 254); /* blue-200 */
    --color-primary-300: rgb(147, 197, 253); /* blue-300 */
    --color-primary-400: rgb(96, 165, 250); /* blue-400 */
    --color-primary-500: rgb(59, 130, 246); /* blue-500 */
    --color-primary-600: rgb(37, 99, 235); /* blue-600 */
    --color-primary-700: rgb(29, 78, 216); /* blue-700 */
    --color-primary-800: rgb(30, 64, 175); /* blue-800 */
    --color-primary-900: rgb(30, 58, 138); /* blue-900 */
    --color-primary-950: rgb(23, 37, 84); /* blue-950 */

    /* Semantic colors - Success (Green) */
    --color-success-50: rgb(240, 253, 244);
    --color-success-100: rgb(220, 252, 231);
    --color-success-500: rgb(34, 197, 94);
    --color-success-600: rgb(22, 163, 74);
    --color-success-700: rgb(21, 128, 61);

    /* Semantic colors - Error (Red) */
    --color-error-50: rgb(254, 242, 242);
    --color-error-100: rgb(254, 226, 226);
    --color-error-500: rgb(239, 68, 68);
    --color-error-600: rgb(220, 38, 38);
    --color-error-700: rgb(185, 28, 28);

    /* Semantic colors - Warning (Amber) */
    --color-warning-50: rgb(255, 251, 235);
    --color-warning-100: rgb(254, 243, 199);
    --color-warning-500: rgb(245, 158, 11);
    --color-warning-600: rgb(217, 119, 6);
    --color-warning-700: rgb(180, 83, 9);

    /* Semantic colors - Info (Teal - different from primary for ocean theme) */
    --color-info-50: rgb(241, 249, 250);
    --color-info-100: rgb(219, 238, 242);
    --color-info-500: rgb(60, 135, 158);
    --color-info-600: rgb(52, 110, 134);
    --color-info-700: rgb(48, 91, 110);

    /* Gray scale for UI elements (same across themes) */
    --color-gray-50: rgb(249, 250, 251);
    --color-gray-100: rgb(243, 244, 246);
    --color-gray-200: rgb(229, 231, 235);
    --color-gray-300: rgb(209, 213, 219);
    --color-gray-400: rgb(156, 163, 175);
    --color-gray-500: rgb(107, 114, 128);
    --color-gray-600: rgb(75, 85, 99);
    --color-gray-700: rgb(55, 65, 81);
    --color-gray-800: rgb(31, 41, 55);
    --color-gray-900: rgb(17, 24, 39);
    --color-gray-950: rgb(3, 7, 18);
  }

  a.block-link:after {
    position: absolute;
    content: '';
    inset: 0;
  }

  /* Admin gradient backgrounds - neutral gray for chrome */
  .bg-gradient-admin {
    background: linear-gradient(to bottom right, rgb(17, 24, 39), rgb(55, 65, 81));
    border-bottom-left-radius: 0;
  }
}

/* Form input styles */
@layer components {
  /* Base form field styles */
  input[type='text'],
  input[type='email'],
  input[type='password'],
  input[type='url'],
  input[type='tel'],
  input[type='number'],
  input[type='date'],
  input[type='datetime-local'],
  input[type='month'],
  input[type='week'],
  input[type='time'],
  input[type='search'],
  textarea {
    @apply block w-full rounded-md border-0 p-2 text-gray-900 bg-white;
    @apply ring-1 ring-inset ring-primary-400 placeholder:text-gray-400;
    @apply focus:ring-2 focus:ring-inset focus:ring-primary-600;
    @apply hover:cursor-pointer sm:leading-6;
    @apply disabled:ring-gray-300 disabled:focus:ring-gray-300 disabled:bg-gray-50 disabled:cursor-not-allowed;
  }

  /* Select specific styling */
  select {
    @apply block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 bg-white;
    @apply ring-1 ring-inset ring-primary-400;
    @apply focus:ring-2 focus:ring-inset focus:ring-primary-600;
    @apply hover:cursor-pointer sm:leading-6;
    @apply disabled:ring-gray-300 disabled:focus:ring-gray-300 disabled:bg-gray-50 disabled:cursor-not-allowed;
    @apply appearance-none bg-right bg-no-repeat;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.5rem center;
    background-size: 1.5em 1.5em;
  }

  /* Checkbox and radio styling */
  input[type='checkbox'],
  input[type='radio'] {
    @apply w-4 h-4 text-primary-600 bg-white border-gray-300 rounded transition-colors duration-200;
    @apply focus:ring-2 focus:ring-primary-500 focus:ring-offset-2;
    @apply disabled:bg-gray-100 disabled:cursor-not-allowed;
  }

  input[type='radio'] {
    @apply rounded-full;
  }

  /* Label styling */
  label {
    @apply block text-sm font-medium text-gray-700 mb-1;
  }

  /* Field wrapper styling */
  .field {
    @apply mb-4;
  }

  /* Error state styling */
  input.error,
  textarea.error,
  select.error {
    @apply ring-error-500 focus:ring-error-500;
  }

  .field-error {
    @apply text-sm text-error-600 mt-1;
  }

  /* Button styling */
  .btn {
    @apply inline-flex items-center justify-center px-6 py-3 text-base font-semibold rounded-md transition-colors duration-200;
    @apply focus-visible:outline-2 focus-visible:outline-offset-2;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-primary {
    @apply bg-primary-500 text-white hover:bg-primary-600 focus-visible:outline-primary-600;
  }

  .btn-secondary {
    @apply bg-gray-200 text-gray-900 hover:bg-gray-300 focus-visible:outline-gray-500;
  }

  .btn-danger {
    @apply bg-error-600 text-white hover:bg-error-700 focus-visible:outline-error-600;
  }

  .btn-success {
    @apply bg-success-600 text-white hover:bg-success-700 focus-visible:outline-success-600;
  }

  a.block-link:after {
    position: absolute;
    content: '';
    inset: 0;
  }
}

/* EditorJS content styles */
@layer components {
  .codex-editor__redactor .ce-block .ce-block__content {
    @apply text-base font-normal font-sans text-gray-900 leading-[1.6] space-y-[1.6rem];

    h1.ce-header {
      @apply text-3xl md:text-4xl font-semibold font-sans leading-[1.2];
    }

    h2.ce-header {
      @apply text-2xl font-medium font-sans leading-[1.3] mb-4 mt-8;
    }

    h3.ce-header {
      @apply text-xl font-normal font-sans leading-[1.3] mb-4 mt-6;
    }

    p,
    li {
      @apply leading-[1.6] tracking-wide max-w-[85ch];

      a {
        @apply text-primary-600 underline underline-offset-2 hover:text-primary-700 focus:outline-2 focus:outline-offset-2 focus:outline-primary-600;
      }

      strong,
      b {
        @apply font-semibold;
      }
    }

    p {
      @apply mb-4;
    }

    .cdx-quote {
      @apply bg-gray-100 border-l-primary-300 border-l-8 p-6 mb-4;

      .cdx-quote__caption {
        @apply block ml-6 mt-2 text-sm text-gray-600;
      }

      .cdx-quote__text {
        quotes: '\201C' '\201D' '\2018' '\2019';
        @apply pl-6;

        &:before {
          @apply -ml-8 mr-2 text-primary-600 text-6xl leading-4 align-text-bottom font-serif;
          content: open-quote;
        }

        p {
          @apply inline italic text-lg;
        }
      }
    }

    .cdx-list {
      @apply mb-4 pl-6;

      &--ordered {
        @apply list-decimal;
      }

      &--unordered {
        @apply list-disc;
      }

      .cdx-list {
        @apply mt-2 mb-0;
      }

      .cdx-list__item {
        @apply mb-2 pl-2;
      }
    }

    .cdx-nested-list {
      @apply mb-4 pl-6;

      &--ordered {
        @apply list-decimal;
      }

      &--unordered {
        @apply list-disc;
      }

      .cdx-nested-list {
        @apply mt-2 mb-0;
      }

      .cdx-nested-list__item {
        @apply mb-2 pl-2;
      }
    }

    .cdx-table {
      @apply w-full border-collapse border-2 border-gray-300 my-6;

      &__head {
        @apply font-semibold border-gray-300 border-r-2 p-3 bg-gray-100;
      }

      &__row {
        @apply border-gray-300 border-b-2;
      }

      &__cell {
        @apply border-gray-300 border-r-2 p-3;
      }
    }

    .cdx-embed {
      iframe {
        @apply w-full border-none;
      }
    }
  }
}

/* Page tree indentation utilities - must be explicitly defined because
   they're used in panda-cms views which aren't scanned by this build */
@layer utilities {
  .ml-18 {
    margin-left: var(--spacing-18, 4.5rem);
  }

  /* ButtonComponent action classes - generated dynamically in Ruby, so must be explicitly defined */
  .bg-primary-500 {
    background-color: var(--color-primary-500);
  }

  .bg-primary-600 {
    background-color: var(--color-primary-600);
  }

  .hover\:bg-primary-600:hover {
    background-color: var(--color-primary-600);
  }

  .focus-visible\:outline-primary-600:focus-visible {
    outline-color: var(--color-primary-600);
  }

  /* Sidebar navigation classes - used in dynamic Ruby string interpolation */
  .space-y-0\.5 > :not(:last-child) {
    margin-bottom: 0.125rem;
  }

  .pl-8 {
    padding-left: 2rem;
  }

  .pr-2 {
    padding-right: 0.5rem;
  }

  .text-white\/90 {
    color: rgb(255 255 255 / 0.9);
  }

  .border-white\/20 {
    border-color: rgb(255 255 255 / 0.2);
  }

  .hover\:bg-primary-500\/40:hover {
    background-color: color-mix(in srgb, var(--color-primary-500) 40%, transparent);
  }
}
