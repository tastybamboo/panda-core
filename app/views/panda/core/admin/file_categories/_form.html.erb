<%= panda_form_with model: file_category,
            url: file_category.persisted? ? admin_file_category_path(file_category) : admin_file_categories_path,
            method: file_category.persisted? ? :patch : :post,
            local: true do |f| %>
  <%= render Panda::Core::Admin::FormErrorComponent.new(model: file_category) %>

  <%= render Panda::Core::Admin::PanelComponent.new do |panel| %>
    <% panel.with_heading_slot { "Category Settings" } %>
    <div class="space-y-4">
      <%= f.text_field :name, placeholder: "e.g. Project Assets" %>
      <%= f.text_field :icon, label: "Icon (FontAwesome class)", placeholder: "e.g. fa-solid fa-folder", meta: "Use fa-solid or fab icon classes only." %>
      <%= f.number_field :position, label: "Display Order", value: file_category.position || 100 %>
      <%= f.collection_select :parent_id, Panda::Core::FileCategory.roots.ordered.where.not(id: file_category.id), :id, :name, { include_blank: "None (top-level)", label: "Parent Category" } %>
    </div>
  <% end %>

  <%= render Panda::Core::Admin::FormFooterComponent.new(
    submit_text: file_category.persisted? ? "Update Category" : "Create Category"
  ) %>
<% end %>
