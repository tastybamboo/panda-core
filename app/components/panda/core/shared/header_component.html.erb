<!DOCTYPE html>
<html data-theme="<%= Panda::Core::Current&.user&.current_theme || Panda::Core.config.default_theme %>" class="<%= @html_class %>">
  <head>
    <title><%= helpers.content_for?(:title) ? helpers.content_for(:title) : (Panda::Core.config.admin_title || "Panda Admin") %></title>
    <%= helpers.csrf_meta_tags %>
    <%= helpers.csp_meta_tag %>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css">
    <%= helpers.panda_core_stylesheet %>

    <% if defined?(Chartkick::Engine) %>
      <script src="/panda-core-assets/chartkick/Chart.bundle.js"></script>
      <script src="/panda-core-assets/chartkick/chartkick.js"></script>
    <% end %>

    <!-- ES Module Shims polyfill - must load BEFORE importmap -->
    <script async src="https://ga.jspm.io/npm:es-module-shims@2.6.2/dist/es-module-shims.js"></script>

    <!-- Panda JavaScript (Core + all registered modules via ModuleRegistry) -->
    <%= helpers.panda_core_javascript %>

    <% if defined?(Panda::CMS) && helpers.controller.class.name.start_with?("Panda::CMS") %>
      <%= render "panda/cms/shared/favicons" %>
    <% end %>

    <%= helpers.content_for :head %>
  </head>
  <body class="overflow-hidden h-full <%= @body_class %>" data-environment="<%= Rails.env %>">
